<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - Test Coverage - raytracer/materials/phong_shader.h</title>
  <link rel="stylesheet" type="text/css" href="../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../index.html">top level</a> - <a href="index.html">raytracer/materials</a> - phong_shader.h<span style="font-size: 80%;"> (source / <a href="phong_shader.h.func.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">Test Coverage</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">11</td>
            <td class="headerCovTableEntry">12</td>
            <td class="headerCovTableEntryHi">91.7 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2014-01-16</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">1</td>
            <td class="headerCovTableEntry">3</td>
            <td class="headerCovTableEntryLo">33.3 %</td>
          </tr>
          <tr>
            <td class="headerItem">Legend:</td>
            <td class="headerValueLeg">            Lines:
            <span class="coverLegendCov">hit</span>
            <span class="coverLegendNoCov">not hit</span>
</td>
            <td></td>
          </tr>
          <tr><td><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : #ifndef __PHONG_SHADER_H__</a>
<span class="lineNum">       2 </span>            : #define __PHONG_SHADER_H__
<span class="lineNum">       3 </span>            : 
<span class="lineNum">       4 </span>            : #include &quot;common.h&quot;
<span class="lineNum">       5 </span>            : #include &quot;point_t.h&quot;
<span class="lineNum">       6 </span>            : #include &quot;material.h&quot;
<span class="lineNum">       7 </span>            : #include &quot;line.h&quot;
<span class="lineNum">       8 </span>            : #include &quot;ray.h&quot;
<span class="lineNum">       9 </span>            : 
<span class="lineNum">      10 </span>            : 
<span class="lineNum">      11 </span>            : /* Pure virtual class for material data and shading */
<span class="lineNum">      12 </span>            : class phong_shader : public material
<span class="lineNum">      13 </span>            : {
<a name="14"><span class="lineNum">      14 </span>            :     public :</a>
<span class="lineNum">      15 </span>            :         /* Constructor with white co-efficient */
<span class="lineNum">      16 </span><span class="lineCov">         64 :         phong_shader(const ext_colour_t &amp;rgb, const fp_t kd=0.0, const fp_t ks=0.0, const fp_t s=0.0, const fp_t tran=0.0, const fp_t ri=1.0, const fp_t rf=0.0, const fp_t td=0.0, const fp_t rfd=0.0) : </span>
<span class="lineNum">      17 </span><span class="lineCov">         64 :             material(tran &gt; (fp_t)0.0), ka(ext_colour_t(0.0, 0.0, 0.0)), kd(rgb * kd), ks(rgb * ks), s(s), tran(tran), ri(ri), rf(rf), td(td), rfd(rfd) </span>
<span class="lineNum">      18 </span>            :             {
<span class="lineNum">      19 </span>            :                 /* A whole bunch of sanity checking asserts */
<span class="lineNum">      20 </span>            :                 /* Note rgb is stored in light_intensity in the format ( r, g, b ) */
<span class="lineNum">      21 </span><span class="lineCov">         64 :                 assert((rgb.r    &gt;= (fp_t)0.0) &amp;&amp;  (rgb.r    &lt;= (fp_t)255.0 ));                                /* Best the rgb values are in the correct range */</span>
<span class="lineNum">      22 </span><span class="lineCov">         64 :                 assert((rgb.g    &gt;= (fp_t)0.0) &amp;&amp;  (rgb.g    &lt;= (fp_t)255.0 ));</span>
<span class="lineNum">      23 </span><span class="lineCov">         64 :                 assert((rgb.b    &gt;= (fp_t)0.0) &amp;&amp;  (rgb.b    &lt;= (fp_t)255.0 ));</span>
<span class="lineNum">      24 </span><span class="lineCov">         64 :                 assert((kd       &gt;= (fp_t)0.0) &amp;&amp;  (kd       &lt;= (fp_t)  1.0 ));</span>
<span class="lineNum">      25 </span><span class="lineCov">         64 :                 assert((ks       &gt;= (fp_t)0.0) &amp;&amp;  (ks       &lt;= (fp_t)  1.0 ));</span>
<span class="lineNum">      26 </span><span class="lineCov">         64 :                 assert((tran     &gt;= (fp_t)0.0) &amp;&amp;  (tran     &lt;= (fp_t)  0.95));</span>
<span class="lineNum">      27 </span><span class="lineCov">         64 :                 assert((tran     == (fp_t)0.0) || ((this-&gt;ri &gt;= (fp_t)  1.0 ) &amp;&amp; (this-&gt;ri &lt;= (fp_t)  5.0)));  /* 2.49 is the highest real refractive index */</span>
<span class="lineNum">      28 </span><span class="lineCov">         64 :                 assert((this-&gt;rf &gt;= (fp_t)0.0) &amp;&amp;  (this-&gt;rf &lt;= (fp_t)  0.95));                                /* This limits the number of iterative refractions (there is no such thing as a perfect mirror) */</span>
<span class="lineNum">      29 </span><span class="lineCov">         64 :             };</span>
<span class="lineNum">      30 </span>            : 
<span class="lineNum">      31 </span>            :         /* Constructor with coloured co-efficient */
<span class="lineNum">      32 </span>            :         phong_shader(const ext_colour_t &amp;ka, const ext_colour_t &amp;kd, const ext_colour_t &amp;ks, const fp_t s=0.0, const fp_t tran=0.0, const fp_t ri=1.0, const fp_t rf=0.0, const fp_t td=0.0, const fp_t rfd=0.0) : 
<span class="lineNum">      33 </span>            :             material(tran &gt; (fp_t)0.0), ka(ka), kd(kd), ks(ks), s(s), tran(tran), ri(ri), rf(rf), td(td), rfd(rfd) 
<span class="lineNum">      34 </span>            :             {
<span class="lineNum">      35 </span>            :                 /* A whole bunch of sanity checking asserts */
<span class="lineNum">      36 </span>            :                 /* Note rgb is stored in light_intensity in the format ( r, g, b ) */
<span class="lineNum">      37 </span>            :                 assert((ka.r     &gt;= (fp_t)0.0) &amp;&amp;  (ka.r     &lt;= (fp_t)255.0 ));                                /* Best the rgb values are in the correct range */
<span class="lineNum">      38 </span>            :                 assert((ka.g     &gt;= (fp_t)0.0) &amp;&amp;  (ka.g     &lt;= (fp_t)255.0 ));
<span class="lineNum">      39 </span>            :                 assert((ka.b     &gt;= (fp_t)0.0) &amp;&amp;  (ka.b     &lt;= (fp_t)255.0 ));
<span class="lineNum">      40 </span>            :                 assert((kd.r     &gt;= (fp_t)0.0) &amp;&amp;  (kd.r     &lt;= (fp_t)255.0 )); 
<span class="lineNum">      41 </span>            :                 assert((kd.g     &gt;= (fp_t)0.0) &amp;&amp;  (kd.g     &lt;= (fp_t)255.0 ));
<span class="lineNum">      42 </span>            :                 assert((kd.b     &gt;= (fp_t)0.0) &amp;&amp;  (kd.b     &lt;= (fp_t)255.0 ));
<span class="lineNum">      43 </span>            :                 assert((ks.r     &gt;= (fp_t)0.0) &amp;&amp;  (ks.r     &lt;= (fp_t)255.0 ));
<span class="lineNum">      44 </span>            :                 assert((ks.g     &gt;= (fp_t)0.0) &amp;&amp;  (ks.g     &lt;= (fp_t)255.0 ));
<span class="lineNum">      45 </span>            :                 assert((ks.b     &gt;= (fp_t)0.0) &amp;&amp;  (ks.b     &lt;= (fp_t)255.0 ));
<span class="lineNum">      46 </span>            :                 assert((tran     &gt;= (fp_t)0.0) &amp;&amp;  (tran     &lt;= (fp_t)  0.95));
<span class="lineNum">      47 </span>            :                 assert((tran     == (fp_t)0.0) || ((this-&gt;ri &gt;= (fp_t)  1.0 ) &amp;&amp; (this-&gt;ri &lt;= (fp_t)  5.0)));  /* 2.49 is the highest real refractive index */
<span class="lineNum">      48 </span>            :                 assert((this-&gt;rf &gt;= (fp_t)0.0) &amp;&amp;  (this-&gt;rf &lt;= (fp_t)  0.95));                                /* This limits the number of iterative refractions (there is no such thing as a perfect mirror) */
<span class="lineNum">      49 </span>            :             };
<a name="50"><span class="lineNum">      50 </span>            : </a>
<span class="lineNum">      51 </span>            :         /* Destructor */
<span class="lineNum">      52 </span><span class="lineNoCov">          0 :         virtual ~phong_shader() { };</span>
<span class="lineNum">      53 </span>            : 
<span class="lineNum">      54 </span>            :         /* Function the allow the shader a chance to generate SIMD packets */
<span class="lineNum">      55 </span>            :         void generate_rays(const ray_trace_engine &amp;r, ray &amp;i, const line &amp;n, const hit_t h, ray *const rl, ray *const rf, fp_t *const n_rl, fp_t *const n_rf) const;
<span class="lineNum">      56 </span>            : 
<span class="lineNum">      57 </span>            :         /* Shading function. To allow the shader to shade the current object */
<span class="lineNum">      58 </span>            :         void shade(const ray_trace_engine &amp;r, ray &amp;i, const line &amp;n, const hit_t h, ext_colour_t *const c, const point_t &amp;vt) const;
<span class="lineNum">      59 </span>            : 
<span class="lineNum">      60 </span>            :         /* Function to the allow the shader a combined SIMD packets traced secondary rays into the image */
<span class="lineNum">      61 </span>            :         void combind_secondary_rays(const ray_trace_engine &amp;r, ext_colour_t &amp;c, const ray *const rl, const ray *const rf, const ext_colour_t *const c_rl, const ext_colour_t *const c_rf, const fp_t *const n_rl, const fp_t *const n_rf) const;
<span class="lineNum">      62 </span>            :         
<span class="lineNum">      63 </span>            :     private :
<span class="lineNum">      64 </span>            :         const ext_colour_t  ka;     /* Ambient co-efficient         */
<span class="lineNum">      65 </span>            :         const ext_colour_t  kd;     /* Diffuse co-efficient         */
<span class="lineNum">      66 </span>            :         const ext_colour_t  ks;     /* Specular co-efficient        */
<span class="lineNum">      67 </span>            :         const fp_t          s;      /* Phong Shine (cosine power)   */
<span class="lineNum">      68 </span>            :         const fp_t          tran;   /* Transmittance                */
<span class="lineNum">      69 </span>            :         const fp_t          ri;     /* Refractive index             */
<span class="lineNum">      70 </span>            :         const fp_t          rf;     /* Reflectance                  */
<span class="lineNum">      71 </span>            :         const fp_t          td;     /* Transmitted diffuseness      */
<span class="lineNum">      72 </span>            :         const fp_t          rfd;    /* Reflected diffuseness        */
<span class="lineNum">      73 </span>            : };
<span class="lineNum">      74 </span>            : 
<span class="lineNum">      75 </span>            : #endif /* #ifndef __PHONG_SHADER_H__ */
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.10</a></td></tr>
  </table>
  <br>

</body>
</html>
